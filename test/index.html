<html>
    <body>
        <script src="src/thor-io.client.js"></script>
        <script>
            var factory;
            document.addEventListener("DOMContentLoaded", function(){
                    console.log("document -> ready");


                    factory = new ThorIOClient.Factory("ws://localhost:1337",
                    ["testController"]
                    );

                    factory.OnOpen = function(tcProxy){
                            console.log("testController channel/proxy created",tcProxy);

                            tcProxy.On("welcome",function(msg){
                                    console.log("welcome message from testController",msg);
                            });

                            tcProxy.On("sendHello", function(msg){
                                    console.log("got a hello message from testController",msg)
                            });

                                // invoke sendHello each 2 seconds, will the "listener" above.

                                window.setInterval(function(){
                                                     
                                        tcProxy.Invoke("sendHello",{dt:new Date},
                                        "testController");


                                },2*1000);


                            tcProxy.Connect();

                    };



            });
      </script>
    </body>
</html>