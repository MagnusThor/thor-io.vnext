<html>

<body>
        <h1>Test</h1>
        <script src="thor-io.client.js">
        </script>
        <script>
                var temp1;
                document.addEventListener("DOMContentLoaded", function() {
                        var client = new ThorIOClient.Factory("ws://localhost:1337", ["example"], {});
                        client.OnOpen = function(exampleChannel) {
                                temp1 = exampleChannel;
                                exampleChannel.Subscribe("mySub", function(message) {
                                        console.log("mySubs", arguments);
                                });
                                exampleChannel.On("chatMessage-one", function() {
                                        console.log("chatMessage-one",arguments);
                                });
                                exampleChannel.On("chatMessage-all", function() {
                                        console.log("chatMessage-all",arguments);
                                });
                                exampleChannel.On("chatMessage-to", function() {
                                        console.log("chatMessage-to",arguments);
                                });
                                exampleChannel.OnOpen = function(ci) {
                                        console.log("channel is open", ci);
                                        setInterval(function() {
                                                exampleChannel.Invoke("sendMessage", {
                                                        dt: new Date(),
                                                        txt: "Hello World!"
                                                }, "example");
                                        }, 15000);
                                };
                                exampleChannel.Connect();
                        };
                });
        </script>

</body>

</html>